---
import Status from "../../components/Status.astro";

export const partial = true;

// TODO csrf token?
const data = await Astro.request.formData();
const owner = data.get("owner");
const repo = data.get("repo");

const { status } = await Astro.locals.api.submit<{ status: string }>("setup", [
  { owner, repo },
]);
---

<Status value={status} />
